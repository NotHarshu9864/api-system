<!DOCTYPE html><html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Har$H Lecture JSON Builder</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-cyan-50 min-h-screen">  <!-- Header -->  <header class="bg-cyan-500 text-white py-4 shadow">
    <h1 class="text-center text-2xl font-bold tracking-wide">Har$H</h1>
  </header>  <!-- Main Card -->  <main class="p-4">
    <div class="max-w-3xl mx-auto bg-white rounded-2xl shadow-lg p-5 space-y-4">
      <h2 class="text-xl font-semibold text-cyan-600 text-center">Lecture URL â†’ JSON Converter</h2><!-- Subject -->
  <div>
    <label class="block text-sm font-semibold mb-1">Subject Name</label>
    <input id="subjectName" type="text" placeholder="Enter subject name"
      class="w-full border border-cyan-200 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-cyan-400" />
  </div>

  <!-- File Upload -->
  <div>
    <label class="block text-sm font-semibold mb-1">Upload Subject File (.txt)</label>
    <input id="fileInput" type="file" accept=".txt"
      class="w-full border border-cyan-200 rounded-lg px-3 py-2 bg-white" />
  </div>

  <!-- Buttons -->
  <div class="flex gap-3 flex-wrap justify-center">
    <button onclick="processFile()"
      class="bg-cyan-500 text-white px-5 py-2 rounded-lg font-semibold hover:bg-cyan-600">Generate JSON</button>
    <button onclick="copyJSON()"
      class="bg-cyan-100 text-cyan-700 px-5 py-2 rounded-lg font-semibold hover:bg-cyan-200">Copy JSON</button>
  </div>

  <!-- Output -->
  <pre id="output" class="bg-slate-900 text-cyan-200 text-xs p-4 rounded-xl overflow-auto max-h-[400px]">JSON preview will appear here...</pre>
</div>

  </main><script>
  function extractDecodedUrls(rawUrl) {
    // Find encoded URL part (after last /)
    const parts = rawUrl.split('/');
    const lastPart = parts[parts.length - 1];

    let decodedMain = rawUrl;
    let notes = '';

    try {
      const urlObj = new URL(rawUrl);
      const base = decodeURIComponent(urlObj.pathname.split('/').pop());

      if (base.startsWith('http')) {
        decodedMain = base;
      }

      for (const [key, value] of urlObj.searchParams.entries()) {
        if (value && value.startsWith('http')) {
          notes = decodeURIComponent(value);
        }
      }
    } catch (e) {
      decodedMain = decodeURIComponent(rawUrl);
    }

    // If still contains encoded https
    if (decodedMain.includes('http%')) {
      decodedMain = decodeURIComponent(decodedMain.substring(decodedMain.indexOf('http%')));
    }

    return { play: decodedMain, notes };
  }

  function processFile() {
    const subject = document.getElementById('subjectName').value.trim();
    const file = document.getElementById('fileInput').files[0];
    const output = document.getElementById('output');

    if (!subject) return alert('Enter subject name');
    if (!file) return alert('Upload file');

    const reader = new FileReader();
    reader.onload = () => {
      const lines = reader.result.split(/\r?\n/).map(l => l.trim()).filter(Boolean);

      const chapters = [];
      let currentChapter = null;
      let chapterIndex = 0;

      lines.forEach(line => {
        if (!line.startsWith('http')) {
          // New chapter
          chapterIndex++;
          currentChapter = {
            id: 'ch' + chapterIndex,
            title: line,
            videos: []
          };
          chapters.push(currentChapter);
        } else if (currentChapter) {
          const lecNumber = currentChapter.videos.length + 1;
          const decoded = extractDecodedUrls(line);

          currentChapter.videos.push({
            id: 'lec' + lecNumber,
            title: 'Lecture ' + lecNumber,
            play: decoded.play,
            notes: decoded.notes || ''
          });
        }
      });

      const finalJSON = { subject, chapters };
      output.textContent = JSON.stringify(finalJSON, null, 2);
    };

    reader.readAsText(file);
  }

  function copyJSON() {
    const text = document.getElementById('output').textContent;
    if (!text || text.startsWith('JSON preview')) return;
    navigator.clipboard.writeText(text);
    alert('JSON copied');
  }
</script></body>
</html><!-- ================= VERCEL DEPLOY FILE =================
Create a file named vercel.json in the same directory
----------------------------------------------------------
{
  "version": 2,
  "routes": [
    { "src": "/(.*)", "dest": "/index.html" }
  ]
}
======================================================== -->